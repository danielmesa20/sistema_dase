{% extends "base.html" %}

{% load static %}

{% block content %}

<h1 class="titulo">BÃšSQUEDA DE DATOS</h1>


<div class="divc">

<form action="busqueda" method="POST" class="col-md m-auto ">

  {% csrf_token %}

  <div class="form-row justify-content-center">

  <div class="col-auto my-1">
    <input type="text" class="form-control" name="data" id="data" maxlength="100" placeholder="Ej: Nombre / Cedula">
  </div>

  <div class="col-auto my-1">
    <select class="selectpicker"  name="select_carrera" id="select_carrera" multiple="multiple"  multiple data-selected-text-format="count>3"  actionsBox required>
        <option selected="true" value="all">Todas las carreras</option>
        {% for i in c %}
        <option  value="{{ i.carrera }}">{{ i.carrera }}</option>
        {% endfor %}  
    </select>
  </div>

  <div class="col-auto my-1">
    <select class="selectpicker"  name="select_beneficio" id="select_beneficio" multiple data-selected-text-format="count>3"  required>
        <option selected  value="all">Todos los beneficios</option>
        {% for i in b %}
          <option value="{{ i.tipo_beneficio }}">{{ i.tipo_beneficio }}</option>
        {% endfor %} 
    </select>
  </div>

  <div class="col-auto my-1">
    <select class="selectpicker" name="select_trimestre" id="select_trimestre" multiple data-selected-text-format="count>3"  required>
        <option selected value="all">Todos los trimestres</option>
        {% for i in t %}
        <option value="{{ i.trimestre }}">{{ i.trimestre }}</option>
      {% endfor %}  
    </select>
  </div>

  <div class="form-group col-auto my-1">
    <select class="form-control custom-select mr-sm-2" name="select_order" id="select_order">
      <option selected value="cedula">Ordernar por:</option>
      <option value="nombre">Nombre</option>
      <option value="carrera">Carrera</option>
      <option value="trimestre">Trimestre</option>
      <option value="tipo_beneficio">Beneficio</option>
    </select>
  </div>

  <div class="col-auto my-1">
    <button type="submit" class="btn btn-primary">Buscar</button>
  </div>

  </div>

</form>

</div>

{% comment 'comentario' %}
  Luego que se realiza una busqueda se muestra una lista de resultados
{% endcomment %}

{% if  search %}
      <div class="contenedor">
          <div class="container">
          <div class="row aux">
              <div class="col-sm">Nombre</div>
              <div class="col-sm">Cedula</div>
              <div class="col-sm">Carrera</div>
              <div class="col-sm">Tipo de beneficio</div>
          </div>
          {% for e in search  %}
            <div class="row">
              <div class="col-sm">{{e.cedula}}</div>
              <div class="col-sm"> {{e.nombre}}</div>
              <div class="col-sm">{{e.carrera}}</div>
              <div class="col-sm">{{e.tipo_beneficio}}</div>
              <a href="/DASE/more_info/{{e.cedula}}">+</a>
            </div>
            {% endfor %}
          </div>
      <div>
{% else %}
   {% if messages %}
        {% for message in messages %}
            <h1 class="mensajes">{{message}}</h1>
        {% endfor %}
    {% endif %}
{% endif %}


{% endblock %}